var Qr=Object.defineProperty;var Zr=(r,e,t)=>e in r?Qr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ie=(r,e,t)=>(Zr(r,typeof e!="symbol"?e+"":e,t),t);import{a as ar}from"./style-d20be366.js";import{G as Jr}from"./lil-gui.esm-b4f18ba3.js";import{S as Kr}from"./swissgl-a59cd27d.js";import{g as et}from"./_commonjsHelpers-edff4021.js";import{d as Ue,c as R,b as ee,r as rt}from"./utils-5b63e897.js";let q,Fr="0.",ge=0,We=0;const Ge=new Jr;Ge.hide();const Ee=document.createElement("canvas");Ee.width=window.innerWidth;Ee.height=window.innerHeight;document.body.appendChild(Ee);const te=Kr(Ee),tt=r=>Fr=r;function Ir(r){We=r/1e3-ge,ge=r/1e3,requestAnimationFrame(Ir),q&&te({field:q,FP:Fr}),Q.instances.forEach(t=>t.frame());const e=Object.fromEntries(Q.instances.filter(t=>t.shareField).map(t=>[`field_${t.name}`,t.field[0]]));q=te({Clear:[0,0,0,0],...e,FP:Object.keys(e).map(t=>`${t}(UV)`).join("+")},{format:"rgba32f",tag:"field"})}requestAnimationFrame(Ir);const X={ADD:"s+d",SUBTRACT:"d-s",TRANSPARENT:"d*(1-sa)+s*sa",PREMULTIPLIED:"d*(1-sa)+s",MAX:"max(s,d)",MIN:"min(s,d)",MULTIPLY:"d*s",REPLACE:"s"},T={RANDOM_WORLD:"hash(ivec3(I, seed)).xy * worldSize",RANDOM_ANGLE:"vec2(hash(ivec3(I, seed)).x * TAU,1.0)",RANDOM_RANGE:"hash(ivec3(I, seed)).xy * 2. - 1.",RANDOM_UNIT:"normalize(hash(ivec3(I, seed)).xy * 2. - 1.)",RANDOM:"hash(ivec3(I, seed)).xy",RANDOM2:"hash(ivec3(seed, I*2)).xy",DOT_GRID:r=>`fract(vec2(I) / ${r}.0) * worldSize`,CIRCLE:r=>`vec2(cos(hash(ivec3(I, seed)).x * TAU), sin(hash(ivec3(I, seed)).x * TAU)) * ${r} * max(worldSize.x,worldSize.y) - worldSize/2.`,VERTICLE_LINE:"vec2(worldSize.x/2., hash(ivec3(I, seed)).x * worldSize.y)",HORIZONTAL_LINE:"vec2(hash(ivec3(I, seed)).x * worldSize.x, worldSize.y/2.)",VERTICLE_LINES:r=>`vec2(
      fract(vec2(I).x / ${r}.0) * worldSize.x, 
      fract(hash(ivec3(I, seed)).y * ${r}.0) * worldSize.y
    )`,HORIZONTAL_LINES:r=>`vec2(
      fract(hash(ivec3(I, seed)).x * ${r}.0) * worldSize.x, 
      fract(vec2(I).y / ${r}.0) * worldSize.y
    )`,ZERO:"vec2(0.)",CONST:(r,e)=>`vec2(${r}, ${e})`,VERTICLE_LINE_AT:r=>`vec2(${r}*worldSize.x, hash(ivec3(I, seed)).x * worldSize.y)`,HORIZONTAL_LINE_AT:r=>`vec2(hash(ivec3(I, seed)).x * worldSize.x, ${r}*worldSize.y)`,SIN:(r,e)=>`vec2(hash(ivec3(I, seed)).x * worldSize.x,   sin(hash(ivec3(I, seed)).x * TAU / ${r}) * ${e} * worldSize.y + worldSize.y/2.)`},V=class{constructor({name:e="",debug:t=!1,particleCount:n=1024,particleSize:l=1,shareField:i=!0,readOtherFields:s=!1,readOtherParticles:c=!1,renderParticles:o="mix(vec4(0.), particleColor, smoothstep(1.0, 0.0, length(XY)))",particleColor:a=[1,1,1,1],renderField:u="mix(vec4(0.), fieldColor, length(field(UV))/2.)",fieldColor:p=[1,1,1,1],writeField:f="smoothstep(1.0, 0.0, length(XY))",writeFieldBlend:m=X.ADD,renderFieldBlend:g=X.ADD,renderParticlesBlend:x=X.PREMULTIPLIED,updateFieldDecay:P=.95,updateFieldBlur:v=1,updateFieldSteps:b=1,updateField:O=`vec2 dp = Src_step()*updateFieldBlur;
    float x=UV.x, y=UV.y;
    float l=x-dp.x, r=x+dp.x, u=y-dp.y, d=y+dp.y;
    #define S(x,y) (Src(vec2(x,y)))
    // Apply a 3x3 mean filter and decay factor to the field
    FOut = updateFieldDecay*(S(x,y)+S(l,y)+S(r,y)+S(x,u)+S(x,d)+S(l,u)+S(r,u)+S(l,d)+S(r,d))/9.0;`,initialParticlesXY:S=T.RANDOM_WORLD,initialParticlesZW:A=T.RANDOM_ANGLE,initialField:y="0.",updateParticles:h="",uniforms:d={},numSteps:U=1,numStorysParticles:W=2,wrapParticles:H=!0,mouseStrength:_=.1,mouseRadius:D=.25}={}){this.instances=V.instances,this.index=V.instances.length,this.debug=t,this.name=e||this.index,this.uniforms=d;const E=(z,N,Fe=this)=>{Fe[z]=N,t&&(typeof N=="number"?this.gui.add(Fe,z,-1*N,8*N):Array.isArray(N)&&this.gui.addColor(Fe,z))};t&&(this.gui=Ge.addFolder(this.name),this.gui.add(this,"uniformsToClipboard"),this.gui.add(this,"reset"),Ge.show()),E("particleCount",n),E("particleSize",l),E("numSteps",U),E("updateFieldDecay",P),E("updateFieldBlur",v),E("updateFieldSteps",b),E("particleColor",a),E("fieldColor",p),E("mouseStrength",_),E("mouseRadius",D),Object.entries(this.uniforms).forEach(([z,N])=>E(z,N,this.uniforms)),this.renderParticles=o,this.renderField=u,this.writeField=f,this.readOtherFields=s,this.readOtherParticles=c,this.wrapParticles=H,this.initialParticlesXY=S,this.initialParticlesZW=A,this.initialField=y,this.updateParticles=h,this.renderParticlesBlend=x,this.renderFieldBlend=g,this.numStorysParticles=W,this.writeFieldBlend=m,this.updateField=O,this.shareField=i,this.seed=Math.floor(Math.random()*1e3),this.standardParticlesVP=`
      particle = particles(ID.xy);
      VOut.xy = 2.0 * (particles(ID.xy).xy+XY*particleSize)/vec2(ViewSize) - 1.0;`,this.reset(),V.instances.push(this)}uniformsToClipboard(){const e=JSON.stringify({particleCount:this.particleCount,particleSize:this.particleSize,numSteps:this.numSteps,updateFieldDecay:this.updateFieldDecay,updateFieldBlur:this.updateFieldBlur,updateFieldSteps:this.updateFieldSteps,uniforms:this.uniforms});navigator.clipboard.writeText(e)}frame(){for(let e=0;e<this.numSteps;e++)this.step(te);this.render(te)}render(e){e({fieldColor:this.fieldColor,Blend:this.renderFieldBlend,field:this.field[0],FP:this.renderField,...this.uniforms}),e({particleColor:this.particleColor,Blend:this.renderParticlesBlend,particles:this.particles[0],Grid:this.particles[0].size,particleSize:this.particleSize,Inc:"varying vec4 particle;",VP:this.standardParticlesVP,FP:this.renderParticles})}reset(){this.field=te({FP:this.initialField},{story:2,format:"rgba32f",tag:`field_${this.name}`});for(let e=0;e<this.numStorysParticles;e++)this.particles=te({seed:this.seed,field:this.shareField&&q?q:this.field[0],FP:`vec2 worldSize = vec2(field_size());
          FOut = vec4(${this.initialParticlesXY}, ${this.initialParticlesZW});`},{size:Array(2).fill(Math.ceil(Math.sqrt(this.particleCount))),story:this.numStorysParticles,format:"rgba32f",tag:`particles_${this.name}`})}step(e){for(let t=0;t<this.updateFieldSteps;t++)e({updateFieldDecay:Math.pow(this.updateFieldDecay,1/this.updateFieldSteps),updateFieldBlur:this.updateFieldBlur,FP:this.updateField},this.field);e({...this.uniforms,mouse:ar,time:ge,timeDelta:We,mouseStrength:this.mouseStrength,mouseRadius:this.mouseRadius,...this.numStorysParticles>2?{past:this.particles[1]}:{},seed:this.seed,field:this.shareField&&q?q:this.field[0],...this.readOtherFields?Object.fromEntries(V.instances.filter(t=>t.field).map(t=>[`field_${t.name}`,t.field[0]])):{},...this.readOtherParticles?Object.fromEntries(V.instances.filter(t=>t.particles).map(t=>[`particles_${t.name}`,t.particles[0]])):{},FP:`FOut = Src(I);
      vec2 worldSize = vec2(field_size());
      ${typeof this.updateParticles=="function"?this.updateParticles():this.updateParticles}
      vec2 mousePos = mouse.xy;
      float aspectRatio = worldSize.x/worldSize.y;
      vec2 aspectMult = aspectRatio > 1. ? vec2(aspectRatio, 1.) : vec2(1., 1./aspectRatio);
      float mouseDist = length(mousePos*worldSize - FOut.xy);
      mouseDist = min(mouseDist, length((mousePos+worldSize)*worldSize - FOut.xy));
      mouseDist = min(mouseDist, length((mousePos-worldSize)*worldSize - FOut.xy));
      float strength = mouse.z * smoothstep(mouseRadius, 0., mouseDist/max(worldSize.x, worldSize.y));
      FOut.xy += mouseStrength * strength * (mousePos*worldSize - FOut.xy);
      ${this.wrapParticles?"FOut.xy = mod(FOut.xy, worldSize);":""}`},this.particles),e({...this.uniforms,mouse:ar,time:ge,timeDelta:We,seed:this.seed,mouseStrength:this.mouseStrength,particles:this.particles[0],Grid:this.particles[0].size,particleSize:this.particleSize,Blend:this.writeFieldBlend,Inc:"varying vec4 particle;",VP:this.standardParticlesVP,FP:this.writeField},this.field[0])}};let Q=V;Ie(Q,"instances",[]);var ke={},nt={get exports(){return ke},set exports(r){ke=r}};(function(r){var e=function(){var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(o,a){if(!i[o]){i[o]={};for(var u=0;u<o.length;u++)i[o][o.charAt(u)]=u}return i[o][a]}var c={compressToBase64:function(o){if(o==null)return"";var a=c._compress(o,6,function(u){return n.charAt(u)});switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:c._decompress(o.length,32,function(a){return s(n,o.charAt(a))})},compressToUTF16:function(o){return o==null?"":c._compress(o,15,function(a){return t(a+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:c._decompress(o.length,16384,function(a){return o.charCodeAt(a)-32})},compressToUint8Array:function(o){for(var a=c.compress(o),u=new Uint8Array(a.length*2),p=0,f=a.length;p<f;p++){var m=a.charCodeAt(p);u[p*2]=m>>>8,u[p*2+1]=m%256}return u},decompressFromUint8Array:function(o){if(o==null)return c.decompress(o);for(var a=new Array(o.length/2),u=0,p=a.length;u<p;u++)a[u]=o[u*2]*256+o[u*2+1];var f=[];return a.forEach(function(m){f.push(t(m))}),c.decompress(f.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":c._compress(o,6,function(a){return l.charAt(a)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),c._decompress(o.length,32,function(a){return s(l,o.charAt(a))}))},compress:function(o){return c._compress(o,16,function(a){return t(a)})},_compress:function(o,a,u){if(o==null)return"";var p,f,m={},g={},x="",P="",v="",b=2,O=3,S=2,A=[],y=0,h=0,d;for(d=0;d<o.length;d+=1)if(x=o.charAt(d),Object.prototype.hasOwnProperty.call(m,x)||(m[x]=O++,g[x]=!0),P=v+x,Object.prototype.hasOwnProperty.call(m,P))v=P;else{if(Object.prototype.hasOwnProperty.call(g,v)){if(v.charCodeAt(0)<256){for(p=0;p<S;p++)y=y<<1,h==a-1?(h=0,A.push(u(y)),y=0):h++;for(f=v.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}else{for(f=1,p=0;p<S;p++)y=y<<1|f,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=0;for(f=v.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}b--,b==0&&(b=Math.pow(2,S),S++),delete g[v]}else for(f=m[v],p=0;p<S;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;b--,b==0&&(b=Math.pow(2,S),S++),m[P]=O++,v=String(x)}if(v!==""){if(Object.prototype.hasOwnProperty.call(g,v)){if(v.charCodeAt(0)<256){for(p=0;p<S;p++)y=y<<1,h==a-1?(h=0,A.push(u(y)),y=0):h++;for(f=v.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}else{for(f=1,p=0;p<S;p++)y=y<<1|f,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=0;for(f=v.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}b--,b==0&&(b=Math.pow(2,S),S++),delete g[v]}else for(f=m[v],p=0;p<S;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;b--,b==0&&(b=Math.pow(2,S),S++)}for(f=2,p=0;p<S;p++)y=y<<1|f&1,h==a-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;for(;;)if(y=y<<1,h==a-1){A.push(u(y));break}else h++;return A.join("")},decompress:function(o){return o==null?"":o==""?null:c._decompress(o.length,32768,function(a){return o.charCodeAt(a)})},_decompress:function(o,a,u){var p=[],f=4,m=4,g=3,x="",P=[],v,b,O,S,A,y,h,d={val:u(0),position:a,index:1};for(v=0;v<3;v+=1)p[v]=v;for(O=0,A=Math.pow(2,2),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;switch(O){case 0:for(O=0,A=Math.pow(2,8),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;h=t(O);break;case 1:for(O=0,A=Math.pow(2,16),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;h=t(O);break;case 2:return""}for(p[3]=h,b=h,P.push(h);;){if(d.index>o)return"";for(O=0,A=Math.pow(2,g),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;switch(h=O){case 0:for(O=0,A=Math.pow(2,8),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;p[m++]=t(O),h=m-1,f--;break;case 1:for(O=0,A=Math.pow(2,16),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=a,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;p[m++]=t(O),h=m-1,f--;break;case 2:return P.join("")}if(f==0&&(f=Math.pow(2,g),g++),p[h])x=p[h];else if(h===m)x=b+b.charAt(0);else return null;P.push(x),p[m++]=b+x.charAt(0),f--,b=x,f==0&&(f=Math.pow(2,g),g++)}}};return c}();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(nt);const Rr=ke;var it=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var l=42;e[t]=l;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==l||s.enumerable!==!0)return!1}return!0},lr=typeof Symbol<"u"&&Symbol,ot=it,at=function(){return typeof lr!="function"||typeof Symbol!="function"||typeof lr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ot()},cr={foo:{}},lt=Object,ct=function(){return{__proto__:cr}.foo===cr.foo&&!({__proto__:null}instanceof lt)},st="Function.prototype.bind called on incompatible ",Re=Array.prototype.slice,ft=Object.prototype.toString,ut="[object Function]",pt=function(e){var t=this;if(typeof t!="function"||ft.call(t)!==ut)throw new TypeError(st+t);for(var n=Re.call(arguments,1),l,i=function(){if(this instanceof l){var u=t.apply(this,n.concat(Re.call(arguments)));return Object(u)===u?u:this}else return t.apply(e,n.concat(Re.call(arguments)))},s=Math.max(0,t.length-n.length),c=[],o=0;o<s;o++)c.push("$"+o);if(l=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var a=function(){};a.prototype=t.prototype,l.prototype=new a,a.prototype=null}return l},yt=pt,Je=Function.prototype.bind||yt,dt=Je,ht=dt.call(Function.call,Object.prototype.hasOwnProperty),w,ie=SyntaxError,$r=Function,ne=TypeError,$e=function(r){try{return $r('"use strict"; return ('+r+").constructor;")()}catch{}},Z=Object.getOwnPropertyDescriptor;if(Z)try{Z({},"")}catch{Z=null}var Me=function(){throw new ne},vt=Z?function(){try{return arguments.callee,Me}catch{try{return Z(arguments,"callee").get}catch{return Me}}}():Me,K=at(),mt=ct(),I=Object.getPrototypeOf||(mt?function(r){return r.__proto__}:null),re={},gt=typeof Uint8Array>"u"||!I?w:I(Uint8Array),J={"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":K&&I?I([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":re,"%AsyncGenerator%":re,"%AsyncGeneratorFunction%":re,"%AsyncIteratorPrototype%":re,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":$r,"%GeneratorFunction%":re,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":K&&I?I(I([][Symbol.iterator]())):w,"%JSON%":typeof JSON=="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map>"u"||!K||!I?w:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set>"u"||!K||!I?w:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":K&&I?I(""[Symbol.iterator]()):w,"%Symbol%":K?Symbol:w,"%SyntaxError%":ie,"%ThrowTypeError%":vt,"%TypedArray%":gt,"%TypeError%":ne,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet};if(I)try{null.error}catch(r){var St=I(I(r));J["%Error.prototype%"]=St}var wt=function r(e){var t;if(e==="%AsyncFunction%")t=$e("async function () {}");else if(e==="%GeneratorFunction%")t=$e("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=$e("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var l=r("%AsyncGenerator%");l&&I&&(t=I(l.prototype))}return J[e]=t,t},sr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pe=Je,Se=ht,At=pe.call(Function.call,Array.prototype.concat),Ot=pe.call(Function.apply,Array.prototype.splice),fr=pe.call(Function.call,String.prototype.replace),we=pe.call(Function.call,String.prototype.slice),bt=pe.call(Function.call,RegExp.prototype.exec),xt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Pt=/\\(\\)?/g,Et=function(e){var t=we(e,0,1),n=we(e,-1);if(t==="%"&&n!=="%")throw new ie("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new ie("invalid intrinsic syntax, expected opening `%`");var l=[];return fr(e,xt,function(i,s,c,o){l[l.length]=c?fr(o,Pt,"$1"):s||i}),l},Ft=function(e,t){var n=e,l;if(Se(sr,n)&&(l=sr[n],n="%"+l[0]+"%"),Se(J,n)){var i=J[n];if(i===re&&(i=wt(n)),typeof i>"u"&&!t)throw new ne("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:l,name:n,value:i}}throw new ie("intrinsic "+e+" does not exist!")},Ke=function(e,t){if(typeof e!="string"||e.length===0)throw new ne("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ne('"allowMissing" argument must be a boolean');if(bt(/^%?[^%]*%?$/,e)===null)throw new ie("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Et(e),l=n.length>0?n[0]:"",i=Ft("%"+l+"%",t),s=i.name,c=i.value,o=!1,a=i.alias;a&&(l=a[0],Ot(n,At([0,1],a)));for(var u=1,p=!0;u<n.length;u+=1){var f=n[u],m=we(f,0,1),g=we(f,-1);if((m==='"'||m==="'"||m==="`"||g==='"'||g==="'"||g==="`")&&m!==g)throw new ie("property names with quotes must have matching quotes");if((f==="constructor"||!p)&&(o=!0),l+="."+f,s="%"+l+"%",Se(J,s))c=J[s];else if(c!=null){if(!(f in c)){if(!t)throw new ne("base intrinsic for "+e+" exists, but the property is not available.");return}if(Z&&u+1>=n.length){var x=Z(c,f);p=!!x,p&&"get"in x&&!("originalValue"in x.get)?c=x.get:c=c[f]}else p=Se(c,f),c=c[f];p&&!o&&(J[s]=c)}}return c},je={},It={get exports(){return je},set exports(r){je=r}};(function(r){var e=Je,t=Ke,n=t("%Function.prototype.apply%"),l=t("%Function.prototype.call%"),i=t("%Reflect.apply%",!0)||e.call(l,n),s=t("%Object.getOwnPropertyDescriptor%",!0),c=t("%Object.defineProperty%",!0),o=t("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}r.exports=function(p){var f=i(e,l,arguments);if(s&&c){var m=s(f,"length");m.configurable&&c(f,"length",{value:1+o(0,p.length-(arguments.length-1))})}return f};var a=function(){return i(e,n,arguments)};c?c(r.exports,"apply",{value:a}):r.exports.apply=a})(It);var Mr=Ke,Nr=je,Rt=Nr(Mr("String.prototype.indexOf")),$t=function(e,t){var n=Mr(e,!!t);return typeof n=="function"&&Rt(e,".prototype.")>-1?Nr(n):n};const Mt={},Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),_t=et(Nt);var er=typeof Map=="function"&&Map.prototype,Ne=Object.getOwnPropertyDescriptor&&er?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ae=er&&Ne&&typeof Ne.get=="function"?Ne.get:null,ur=er&&Map.prototype.forEach,rr=typeof Set=="function"&&Set.prototype,_e=Object.getOwnPropertyDescriptor&&rr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Oe=rr&&_e&&typeof _e.get=="function"?_e.get:null,pr=rr&&Set.prototype.forEach,Dt=typeof WeakMap=="function"&&WeakMap.prototype,se=Dt?WeakMap.prototype.has:null,Tt=typeof WeakSet=="function"&&WeakSet.prototype,fe=Tt?WeakSet.prototype.has:null,zt=typeof WeakRef=="function"&&WeakRef.prototype,yr=zt?WeakRef.prototype.deref:null,Ct=Boolean.prototype.valueOf,Bt=Object.prototype.toString,Lt=Function.prototype.toString,Ut=String.prototype.match,tr=String.prototype.slice,k=String.prototype.replace,Wt=String.prototype.toUpperCase,dr=String.prototype.toLowerCase,_r=RegExp.prototype.test,hr=Array.prototype.concat,B=Array.prototype.join,Gt=Array.prototype.slice,vr=Math.floor,He=typeof BigInt=="function"?BigInt.prototype.valueOf:null,De=Object.getOwnPropertySymbols,Ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,oe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",M=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===oe||"symbol")?Symbol.toStringTag:null,Dr=Object.prototype.propertyIsEnumerable,mr=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function gr(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||_r.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-vr(-r):vr(r);if(n!==r){var l=String(n),i=tr.call(e,l.length+1);return k.call(l,t,"$&_")+"."+k.call(k.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return k.call(e,t,"$&_")}var Ve=_t,Sr=Ve.custom,wr=zr(Sr)?Sr:null,kt=function r(e,t,n,l){var i=t||{};if(G(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=G(i,"customInspect")?i.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Br(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var o=String(e);return c?gr(e,o):o}if(typeof e=="bigint"){var a=String(e)+"n";return c?gr(e,a):a}var u=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return qe(e)?"[Array]":"[Object]";var p=cn(i,n);if(typeof l>"u")l=[];else if(Cr(l,e)>=0)return"[Circular]";function f(D,E,z){if(E&&(l=Gt.call(l),l.push(E)),z){var N={depth:i.depth};return G(i,"quoteStyle")&&(N.quoteStyle=i.quoteStyle),r(D,N,n+1,l)}return r(D,i,n+1,l)}if(typeof e=="function"&&!Ar(e)){var m=Jt(e),g=ye(e,f);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(g.length>0?" { "+B.call(g,", ")+" }":"")}if(zr(e)){var x=oe?k.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ye.call(e);return typeof e=="object"&&!oe?ce(x):x}if(on(e)){for(var P="<"+dr.call(String(e.nodeName)),v=e.attributes||[],b=0;b<v.length;b++)P+=" "+v[b].name+"="+Tr(jt(v[b].value),"double",i);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+dr.call(String(e.nodeName))+">",P}if(qe(e)){if(e.length===0)return"[]";var O=ye(e,f);return p&&!ln(O)?"["+Xe(O,p)+"]":"[ "+B.call(O,", ")+" ]"}if(Yt(e)){var S=ye(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Dr.call(e,"cause")?"{ ["+String(e)+"] "+B.call(hr.call("[cause]: "+f(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+B.call(S,", ")+" }"}if(typeof e=="object"&&s){if(wr&&typeof e[wr]=="function"&&Ve)return Ve(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Kt(e)){var A=[];return ur&&ur.call(e,function(D,E){A.push(f(E,e,!0)+" => "+f(D,e))}),Or("Map",Ae.call(e),A,p)}if(tn(e)){var y=[];return pr&&pr.call(e,function(D){y.push(f(D,e))}),Or("Set",Oe.call(e),y,p)}if(en(e))return Te("WeakMap");if(nn(e))return Te("WeakSet");if(rn(e))return Te("WeakRef");if(qt(e))return ce(f(Number(e)));if(Qt(e))return ce(f(He.call(e)));if(Xt(e))return ce(Ct.call(e));if(Vt(e))return ce(f(String(e)));if(!Ht(e)&&!Ar(e)){var h=ye(e,f),d=mr?mr(e)===Object.prototype:e instanceof Object||e.constructor===Object,U=e instanceof Object?"":"null prototype",W=!d&&M&&Object(e)===e&&M in e?tr.call(j(e),8,-1):U?"Object":"",H=d||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",_=H+(W||U?"["+B.call(hr.call([],W||[],U||[]),": ")+"] ":"");return h.length===0?_+"{}":p?_+"{"+Xe(h,p)+"}":_+"{ "+B.call(h,", ")+" }"}return String(e)};function Tr(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function jt(r){return k.call(String(r),/"/g,"&quot;")}function qe(r){return j(r)==="[object Array]"&&(!M||!(typeof r=="object"&&M in r))}function Ht(r){return j(r)==="[object Date]"&&(!M||!(typeof r=="object"&&M in r))}function Ar(r){return j(r)==="[object RegExp]"&&(!M||!(typeof r=="object"&&M in r))}function Yt(r){return j(r)==="[object Error]"&&(!M||!(typeof r=="object"&&M in r))}function Vt(r){return j(r)==="[object String]"&&(!M||!(typeof r=="object"&&M in r))}function qt(r){return j(r)==="[object Number]"&&(!M||!(typeof r=="object"&&M in r))}function Xt(r){return j(r)==="[object Boolean]"&&(!M||!(typeof r=="object"&&M in r))}function zr(r){if(oe)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Ye)return!1;try{return Ye.call(r),!0}catch{}return!1}function Qt(r){if(!r||typeof r!="object"||!He)return!1;try{return He.call(r),!0}catch{}return!1}var Zt=Object.prototype.hasOwnProperty||function(r){return r in this};function G(r,e){return Zt.call(r,e)}function j(r){return Bt.call(r)}function Jt(r){if(r.name)return r.name;var e=Ut.call(Lt.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Cr(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function Kt(r){if(!Ae||!r||typeof r!="object")return!1;try{Ae.call(r);try{Oe.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function en(r){if(!se||!r||typeof r!="object")return!1;try{se.call(r,se);try{fe.call(r,fe)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function rn(r){if(!yr||!r||typeof r!="object")return!1;try{return yr.call(r),!0}catch{}return!1}function tn(r){if(!Oe||!r||typeof r!="object")return!1;try{Oe.call(r);try{Ae.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function nn(r){if(!fe||!r||typeof r!="object")return!1;try{fe.call(r,fe);try{se.call(r,se)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function on(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Br(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return Br(tr.call(r,0,e.maxStringLength),e)+n}var l=k.call(k.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,an);return Tr(l,"single",e)}function an(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Wt.call(e.toString(16))}function ce(r){return"Object("+r+")"}function Te(r){return r+" { ? }"}function Or(r,e,t,n){var l=n?Xe(t,n):B.call(t,", ");return r+" ("+e+") {"+l+"}"}function ln(r){for(var e=0;e<r.length;e++)if(Cr(r[e],`
`)>=0)return!1;return!0}function cn(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=B.call(Array(r.indent+1)," ");else return null;return{base:t,prev:B.call(Array(e+1),t)}}function Xe(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+B.call(r,","+t)+`
`+e.prev}function ye(r,e){var t=qe(r),n=[];if(t){n.length=r.length;for(var l=0;l<r.length;l++)n[l]=G(r,l)?e(r[l],r):""}var i=typeof De=="function"?De(r):[],s;if(oe){s={};for(var c=0;c<i.length;c++)s["$"+i[c]]=i[c]}for(var o in r)G(r,o)&&(t&&String(Number(o))===o&&o<r.length||oe&&s["$"+o]instanceof Symbol||(_r.call(/[^\w$]/,o)?n.push(e(o,r)+": "+e(r[o],r)):n.push(o+": "+e(r[o],r))));if(typeof De=="function")for(var a=0;a<i.length;a++)Dr.call(r,i[a])&&n.push("["+e(i[a])+"]: "+e(r[i[a]],r));return n}var nr=Ke,le=$t,sn=kt,fn=nr("%TypeError%"),de=nr("%WeakMap%",!0),he=nr("%Map%",!0),un=le("WeakMap.prototype.get",!0),pn=le("WeakMap.prototype.set",!0),yn=le("WeakMap.prototype.has",!0),dn=le("Map.prototype.get",!0),hn=le("Map.prototype.set",!0),vn=le("Map.prototype.has",!0),ir=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},mn=function(r,e){var t=ir(r,e);return t&&t.value},gn=function(r,e,t){var n=ir(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},Sn=function(r,e){return!!ir(r,e)},wn=function(){var e,t,n,l={assert:function(i){if(!l.has(i))throw new fn("Side channel does not contain "+sn(i))},get:function(i){if(de&&i&&(typeof i=="object"||typeof i=="function")){if(e)return un(e,i)}else if(he){if(t)return dn(t,i)}else if(n)return mn(n,i)},has:function(i){if(de&&i&&(typeof i=="object"||typeof i=="function")){if(e)return yn(e,i)}else if(he){if(t)return vn(t,i)}else if(n)return Sn(n,i);return!1},set:function(i,s){de&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new de),pn(e,i,s)):he?(t||(t=new he),hn(t,i,s)):(n||(n={key:{},next:null}),gn(n,i,s))}};return l},An=String.prototype.replace,On=/%20/g,ze={RFC1738:"RFC1738",RFC3986:"RFC3986"},or={default:ze.RFC3986,formatters:{RFC1738:function(r){return An.call(r,On,"+")},RFC3986:function(r){return String(r)}},RFC1738:ze.RFC1738,RFC3986:ze.RFC3986},bn=or,Ce=Object.prototype.hasOwnProperty,Y=Array.isArray,C=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),xn=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Y(n)){for(var l=[],i=0;i<n.length;++i)typeof n[i]<"u"&&l.push(n[i]);t.obj[t.prop]=l}}},Lr=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},l=0;l<e.length;++l)typeof e[l]<"u"&&(n[l]=e[l]);return n},Pn=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Y(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Ce.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var l=e;return Y(e)&&!Y(t)&&(l=Lr(e,n)),Y(e)&&Y(t)?(t.forEach(function(i,s){if(Ce.call(e,s)){var c=e[s];c&&typeof c=="object"&&i&&typeof i=="object"?e[s]=r(c,i,n):e.push(i)}else e[s]=i}),e):Object.keys(t).reduce(function(i,s){var c=t[s];return Ce.call(i,s)?i[s]=r(i[s],c,n):i[s]=c,i},l)},En=function(e,t){return Object.keys(t).reduce(function(n,l){return n[l]=t[l],n},e)},Fn=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},In=function(e,t,n,l,i){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var c="",o=0;o<s.length;++o){var a=s.charCodeAt(o);if(a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||i===bn.RFC1738&&(a===40||a===41)){c+=s.charAt(o);continue}if(a<128){c=c+C[a];continue}if(a<2048){c=c+(C[192|a>>6]+C[128|a&63]);continue}if(a<55296||a>=57344){c=c+(C[224|a>>12]+C[128|a>>6&63]+C[128|a&63]);continue}o+=1,a=65536+((a&1023)<<10|s.charCodeAt(o)&1023),c+=C[240|a>>18]+C[128|a>>12&63]+C[128|a>>6&63]+C[128|a&63]}return c},Rn=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],l=0;l<t.length;++l)for(var i=t[l],s=i.obj[i.prop],c=Object.keys(s),o=0;o<c.length;++o){var a=c[o],u=s[a];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(t.push({obj:s,prop:a}),n.push(u))}return xn(t),e},$n=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Mn=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Nn=function(e,t){return[].concat(e,t)},_n=function(e,t){if(Y(e)){for(var n=[],l=0;l<e.length;l+=1)n.push(t(e[l]));return n}return t(e)},Ur={arrayToObject:Lr,assign:En,combine:Nn,compact:Rn,decode:Fn,encode:In,isBuffer:Mn,isRegExp:$n,maybeMap:_n,merge:Pn},Wr=wn,ve=Ur,ue=or,Dn=Object.prototype.hasOwnProperty,br={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},L=Array.isArray,Tn=Array.prototype.push,Gr=function(r,e){Tn.apply(r,L(e)?e:[e])},zn=Date.prototype.toISOString,xr=ue.default,$={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ve.encode,encodeValuesOnly:!1,format:xr,formatter:ue.formatters[xr],indices:!1,serializeDate:function(e){return zn.call(e)},skipNulls:!1,strictNullHandling:!1},Cn=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Be={},Bn=function r(e,t,n,l,i,s,c,o,a,u,p,f,m,g,x,P){for(var v=e,b=P,O=0,S=!1;(b=b.get(Be))!==void 0&&!S;){var A=b.get(e);if(O+=1,typeof A<"u"){if(A===O)throw new RangeError("Cyclic object value");S=!0}typeof b.get(Be)>"u"&&(O=0)}if(typeof o=="function"?v=o(t,v):v instanceof Date?v=p(v):n==="comma"&&L(v)&&(v=ve.maybeMap(v,function(N){return N instanceof Date?p(N):N})),v===null){if(i)return c&&!g?c(t,$.encoder,x,"key",f):t;v=""}if(Cn(v)||ve.isBuffer(v)){if(c){var y=g?t:c(t,$.encoder,x,"key",f);return[m(y)+"="+m(c(v,$.encoder,x,"value",f))]}return[m(t)+"="+m(String(v))]}var h=[];if(typeof v>"u")return h;var d;if(n==="comma"&&L(v))g&&c&&(v=ve.maybeMap(v,c)),d=[{value:v.length>0?v.join(",")||null:void 0}];else if(L(o))d=o;else{var U=Object.keys(v);d=a?U.sort(a):U}for(var W=l&&L(v)&&v.length===1?t+"[]":t,H=0;H<d.length;++H){var _=d[H],D=typeof _=="object"&&typeof _.value<"u"?_.value:v[_];if(!(s&&D===null)){var E=L(v)?typeof n=="function"?n(W,_):W:W+(u?"."+_:"["+_+"]");P.set(e,O);var z=Wr();z.set(Be,P),Gr(h,r(D,E,n,l,i,s,n==="comma"&&g&&L(v)?null:c,o,a,u,p,f,m,g,x,z))}}return h},Ln=function(e){if(!e)return $;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||$.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ue.default;if(typeof e.format<"u"){if(!Dn.call(ue.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var l=ue.formatters[n],i=$.filter;return(typeof e.filter=="function"||L(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:$.addQueryPrefix,allowDots:typeof e.allowDots>"u"?$.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:$.charsetSentinel,delimiter:typeof e.delimiter>"u"?$.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:$.encode,encoder:typeof e.encoder=="function"?e.encoder:$.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:$.encodeValuesOnly,filter:i,format:n,formatter:l,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:$.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:$.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:$.strictNullHandling}},Un=function(r,e){var t=r,n=Ln(e),l,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):L(n.filter)&&(i=n.filter,l=i);var s=[];if(typeof t!="object"||t===null)return"";var c;e&&e.arrayFormat in br?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var o=br[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=o==="comma"&&e&&e.commaRoundTrip;l||(l=Object.keys(t)),n.sort&&l.sort(n.sort);for(var u=Wr(),p=0;p<l.length;++p){var f=l[p];n.skipNulls&&t[f]===null||Gr(s,Bn(t[f],f,o,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var m=s.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""},ae=Ur,Qe=Object.prototype.hasOwnProperty,Wn=Array.isArray,F={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ae.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Gn=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},kr=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},kn="utf8=%26%2310003%3B",jn="utf8=%E2%9C%93",Hn=function(e,t){var n={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=l.split(t.delimiter,i),c=-1,o,a=t.charset;if(t.charsetSentinel)for(o=0;o<s.length;++o)s[o].indexOf("utf8=")===0&&(s[o]===jn?a="utf-8":s[o]===kn&&(a="iso-8859-1"),c=o,o=s.length);for(o=0;o<s.length;++o)if(o!==c){var u=s[o],p=u.indexOf("]="),f=p===-1?u.indexOf("="):p+1,m,g;f===-1?(m=t.decoder(u,F.decoder,a,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(u.slice(0,f),F.decoder,a,"key"),g=ae.maybeMap(kr(u.slice(f+1),t),function(x){return t.decoder(x,F.decoder,a,"value")})),g&&t.interpretNumericEntities&&a==="iso-8859-1"&&(g=Gn(g)),u.indexOf("[]=")>-1&&(g=Wn(g)?[g]:g),Qe.call(n,m)?n[m]=ae.combine(n[m],g):n[m]=g}return n},Yn=function(r,e,t,n){for(var l=n?e:kr(e,t),i=r.length-1;i>=0;--i){var s,c=r[i];if(c==="[]"&&t.parseArrays)s=[].concat(l);else{s=t.plainObjects?Object.create(null):{};var o=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,a=parseInt(o,10);!t.parseArrays&&o===""?s={0:l}:!isNaN(a)&&c!==o&&String(a)===o&&a>=0&&t.parseArrays&&a<=t.arrayLimit?(s=[],s[a]=l):o!=="__proto__"&&(s[o]=l)}l=s}return l},Vn=function(e,t,n,l){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,o=n.depth>0&&s.exec(i),a=o?i.slice(0,o.index):i,u=[];if(a){if(!n.plainObjects&&Qe.call(Object.prototype,a)&&!n.allowPrototypes)return;u.push(a)}for(var p=0;n.depth>0&&(o=c.exec(i))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&Qe.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+i.slice(o.index)+"]"),Yn(u,t,n,l)}},qn=function(e){if(!e)return F;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?F.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?F.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:F.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:F.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:F.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:F.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:F.comma,decoder:typeof e.decoder=="function"?e.decoder:F.decoder,delimiter:typeof e.delimiter=="string"||ae.isRegExp(e.delimiter)?e.delimiter:F.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:F.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:F.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:F.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:F.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:F.strictNullHandling}},Xn=function(r,e){var t=qn(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?Hn(r,t):r,l=t.plainObjects?Object.create(null):{},i=Object.keys(n),s=0;s<i.length;++s){var c=i[s],o=Vn(c,n[c],t,typeof r=="string");l=ae.merge(l,o,t)}return t.allowSparse===!0?l:ae.compact(l)},Qn=Un,Zn=Xn,Jn=or,jr={formats:Jn,parse:Zn,stringify:Qn};const Hr="",Yr=!0,Pr=2,Kn=["species","uniforms","particleColor","fieldColor","renderFieldBlend","renderParticlesBlend","mouseRadius","mouseStrength","initialParticlesXY","type","particleSize","particleCount","bgColor","senseDist","senseAng","moveAng","moveDist","dt","friction","rMax","beta","forceFactor","bgLength","numSpecies","blendMode"],ei=["i","j","l","f","t","I","r","c","k","s","v","x","y","z","J","a","b","d","e","g","h","n","o","p","q","u","L","F","T","Z"],Vr=Object.fromEntries(Kn.map((r,e)=>[r,ei[e]])),ri=Object.fromEntries(Object.entries(Vr).map(([r,e])=>[e,r])),ti=(r,e=Vr)=>(r.split("[").map(n=>n.replace("]","")).filter(n=>isNaN(n)).forEach(n=>{r=r.replaceAll(n,e[n]||n)}),r=r.split("[").map(n=>n.replace("]","")).join(Hr),r),ni=(r,e=ri)=>(r=r.split(Hr).map(n=>isNaN(n)&&e[n]||n).map((n,l)=>l===0?n:`[${n}]`).join(""),r),ii=r=>{const e=new URL(window.location.href),t=jr.stringify(r,{encoder:(n,l,i,s)=>l(s==="key"&&Yr?ti(n):typeof n=="number"?Math.round(n*Math.pow(10,Pr))/Math.pow(10,Pr):n,l,i,s)});e.search=Rr.compressToEncodedURIComponent(t),setTimeout(()=>console.log("URL PARAM LENGTH",e.search.length),100),window.history.replaceState({},"",e)},oi=()=>{const r=new URL(window.location.href);return jr.parse(Rr.decompressFromEncodedURIComponent(r.search.split("?")[1]),{ignoreQueryPrefix:!0,decoder:(t,n,l,i)=>{const s=n(t,n,l,i),c=Number(s);return i==="key"&&Yr?ni(s):Number.isNaN(c)?s:c}})},Pe=class extends Q{constructor(e){super({particleCount:50,particleSize:5,renderField:"mix(vec4(0.), fieldColor, length(field(UV))/2.)",readOtherParticles:!0,initialParticlesZW:T.RANDOM_UNIT,updateParticles:()=>`
  FOut = Src(I); // current particle
  #define wrap(p) (fract(p+0.5)-0.5)
  vec2 force=vec2(0.); // initialize force vector to 0
  ${Pe.instances.map((t,n)=>`// Looping through all particles to compute forces
  for (int y=0; y<particles_${t.name}_size().y; ++y)
  for (int x=0; x<particles_${t.name}_size().x; ++x) {
    if (x==I.x && y==I.y) continue; // Skip self
    vec2 data1 = particles_${t.name}(ivec2(x,y)).xy/(min(worldSize.x,worldSize.y)); // particle to compare with
    vec2 dpos = wrap(data1-(FOut.xy/(min(worldSize.x,worldSize.y)))); // distance vector between particles
    float r = length(dpos); // length of distance vector
    if (r>0.&&r<rMax) {
      float f = 0.;
      if (r<beta) f = r/beta-1.;
      else if (beta<r&&r<1.) f = F[${Math.min(Math.round(n),3)}]*(1.-abs(2.*r-1.-beta)/(1.-beta));
      force += dpos/r*f; // add net force (attraction - repulsion) to the force vector
    }
  }`).join(`
`)}
  force *= rMax*forceFactor;

  FOut.zw *= friction;
  FOut.zw += force*dt;

  // Compute new velocity and position
  FOut.xy = FOut.xy+FOut.zw;
  `,...e,uniforms:{dt:.01,friction:.94,rMax:.2,beta:.01,forceFactor:6,F:Array(4).fill().map(()=>Math.random()*2-1),...e.uniforms||{}}}),Pe.instances.push(this)}};let me=Pe;Ie(me,"instances",[]);class ai extends Q{constructor(e){super({particleCount:1e4,particleSize:1,updateParticles:`
  vec2 dir = vec2(cos(FOut.z), sin(FOut.z));
  mat2 R = rot2(radians(senseAng));
  vec2 sense = senseDist*dir;
  #define F(p) field((FOut.xy+(p))/worldSize)[int(senseChannel)]
  float c=F(sense), r=F(R*sense), l=F(sense*R);
  float rotAng = radians(moveAng);
  if (l>c && c>r) {
      FOut.z -= rotAng;
  } else if (r>c && c>l) {
      FOut.z += rotAng;
  } else if (c<=r && c<=l) {
      FOut.z += sign(hash(ivec3(FOut.xyz*seed)).x-0.5)*rotAng;
  }
  FOut.xy += dir*moveDist;`,...e,uniforms:{senseDist:18,senseAng:6,senseChannel:0,moveAng:45,moveDist:1,...e.uniforms||{}}})}}const Er=Math.sqrt(3),qr=Ue(4,0,.1),Ze=Math.sqrt(qr.slice(0,3).reduce((r,e)=>r+e*e,0)),be=ee(3,8),Xr=Ze<Er/3?X.ADD:Ze<2*Er/3?X.PREMULTIPLIED:X.SUBTRACT,Le={life:()=>({type:"life",uniforms:{dt:R(.005,.02),friction:R(.7,.99),rMax:R(.05,.5),beta:R(.01,.1),forceFactor:R(.5,8)},particleSize:R(1,5),particleCount:ee(100,1400)}),physarum:()=>({type:"physarum",uniforms:{senseDist:R(1,70),senseAng:R(-8,80),moveAng:R(20,170),moveDist:R(1,30)},particleSize:R(.1,1),particleCount:ee(5e3,8e4)}),shared:()=>({particleColor:Ue(4,0,1/be),fieldColor:Ue(4,0,1/be),renderFieldBlend:Xr,renderParticlesBlend:X.ADD,mouseRadius:R(0,.5),mouseStrength:R(-.5,.5),initialParticlesXY:rt([T.SIN(R(0,1),R(0,.5)),T.CIRCLE(R(0,1)),T.RANDOM_WORLD,T.DOT_GRID(ee(2,20)),T.VERTICLE_LINE,T.HORIZONTAL_LINE,T.VERTICLE_LINES(ee(2,20)),T.HORIZONTAL_LINES(ee(2,20))])})},xe={bgColor:qr,bgLength:Ze,numSpecies:be,blendMode:Xr,species:Array(be).fill().map(()=>({...Le.shared(),...R()>.5?Le.life():Le.physarum()})),...oi()};ii(xe);tt(xe.bgColor.join(","));xe.species.forEach(r=>r.type==="life"?new me({...r,renderParticles:`
    vec2 velocity = particle.zw;
    float angle = atan(velocity.x, velocity.y);
    vec2 XYS = XY;
    XYS = vec2(cos(angle)*XYS.x-sin(angle)*XYS.y, sin(angle)*XYS.x+cos(angle)*XYS.y);          
    XYS *= vec2(1.+length(particle.zw)*5.,1.);
    FOut = mix(vec4(0.), particleColor, smoothstep(1.0, 0.2, length(XYS)));
    `}):new ai({...xe.sharedProps,...r}));
