var Lr=Object.defineProperty;var Wr=(r,e,t)=>e in r?Lr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ae=(r,e,t)=>(Wr(r,typeof e!="symbol"?e+"":e,t),t);import{g as Gr}from"./_commonjsHelpers-edff4021.js";import{G as kr}from"./lil-gui.esm-b4f18ba3.js";import{S as jr}from"./swissgl-a59cd27d.js";import{m as Xe}from"./style-7da4ff8e.js";let V,Sr="0.",ye=0,De=0;const Te=new kr;Te.hide();const Se=document.createElement("canvas");Se.width=window.innerWidth;Se.height=window.innerHeight;document.body.appendChild(Se);const K=jr(Se),Jn=r=>Sr=r;function wr(r){De=r/1e3-ye,ye=r/1e3,requestAnimationFrame(wr),V&&K({field:V,FP:Sr}),q.instances.forEach(t=>t.frame());const e=Object.fromEntries(q.instances.filter(t=>t.shareField).map(t=>[`field_${t.name}`,t.field[0]]));V=K({Clear:[0,0,0,0],...e,FP:Object.keys(e).map(t=>`${t}(UV)`).join("+")},{format:"rgba32f",tag:"field"})}requestAnimationFrame(wr);const Oe={ADD:"s+d",SUBTRACT:"d-s",TRANSPARENT:"d*(1-sa)+s*sa",PREMULTIPLIED:"d*(1-sa)+s",MAX:"max(s,d)",MIN:"min(s,d)",MULTIPLY:"d*s",REPLACE:"s"},ze={RANDOM_WORLD:"hash(ivec3(I, seed)).xy * worldSize",RANDOM_ANGLE:"vec2(hash(ivec3(I, seed)).x * TAU,1.0)",RANDOM_RANGE:"hash(ivec3(I, seed)).xy * 2. - 1.",RANDOM_UNIT:"normalize(hash(ivec3(I, seed)).xy * 2. - 1.)",RANDOM:"hash(ivec3(I, seed)).xy",RANDOM2:"hash(ivec3(seed, I*2)).xy",DOT_GRID:r=>`fract(vec2(I) / ${r}.0) * worldSize`,CIRCLE:r=>`vec2(cos(hash(ivec3(I, seed)).x * TAU), sin(hash(ivec3(I, seed)).x * TAU)) * ${r} * max(worldSize.x,worldSize.y) - worldSize/2.`,VERTICLE_LINE:"vec2(worldSize.x/2., hash(ivec3(I, seed)).x * worldSize.y)",HORIZONTAL_LINE:"vec2(hash(ivec3(I, seed)).x * worldSize.x, worldSize.y/2.)",VERTICLE_LINES:r=>`vec2(
      fract(vec2(I).x / ${r}.0) * worldSize.x, 
      fract(hash(ivec3(I, seed)).y * ${r}.0) * worldSize.y
    )`,HORIZONTAL_LINES:r=>`vec2(
      fract(hash(ivec3(I, seed)).x * ${r}.0) * worldSize.x, 
      fract(vec2(I).y / ${r}.0) * worldSize.y
    )`,ZERO:"vec2(0.)",CONST:(r,e)=>`vec2(${r}, ${e})`,VERTICLE_LINE_AT:r=>`vec2(${r}*worldSize.x, hash(ivec3(I, seed)).x * worldSize.y)`,HORIZONTAL_LINE_AT:r=>`vec2(hash(ivec3(I, seed)).x * worldSize.x, ${r}*worldSize.y)`,SIN:(r,e)=>`vec2(hash(ivec3(I, seed)).x * worldSize.x,   sin(hash(ivec3(I, seed)).x * TAU / ${r}) * ${e} * worldSize.y + worldSize.y/2.)`},H=class{constructor({name:e="",debug:t=!1,particleCount:n=1024,particleSize:l=1,shareField:i=!0,readOtherFields:s=!1,readOtherParticles:c=!1,renderParticles:a="mix(vec4(0.), particleColor, smoothstep(1.0, 0.0, length(XY)))",particleColor:o=[1,1,1,1],renderField:u="mix(vec4(0.), fieldColor, length(field(UV))/2.)",fieldColor:p=[1,1,1,1],writeField:f="smoothstep(1.0, 0.0, length(XY))",writeFieldBlend:m=Oe.ADD,renderFieldBlend:g=Oe.ADD,renderParticlesBlend:x=Oe.PREMULTIPLIED,updateFieldDecay:P=.95,updateFieldBlur:v=1,updateFieldSteps:b=1,updateField:O=`vec2 dp = Src_step()*updateFieldBlur;
    float x=UV.x, y=UV.y;
    float l=x-dp.x, r=x+dp.x, u=y-dp.y, d=y+dp.y;
    #define S(x,y) (Src(vec2(x,y)))
    // Apply a 3x3 mean filter and decay factor to the field
    FOut = updateFieldDecay*(S(x,y)+S(l,y)+S(r,y)+S(x,u)+S(x,d)+S(l,u)+S(r,u)+S(l,d)+S(r,d))/9.0;`,initialParticlesXY:S=ze.RANDOM_WORLD,initialParticlesZW:A=ze.RANDOM_ANGLE,initialField:y="0.",updateParticles:h="",uniforms:d={},numSteps:C=1,numStorysParticles:U=2,wrapParticles:k=!0,mouseStrength:_=.1,mouseRadius:N=.25}={}){this.instances=H.instances,this.index=H.instances.length,this.debug=t,this.name=e||this.index,this.uniforms=d;const F=(D,M,we=this)=>{we[D]=M,t&&(typeof M=="number"?this.gui.add(we,D,-1*M,8*M):Array.isArray(M)&&this.gui.addColor(we,D))};t&&(this.gui=Te.addFolder(this.name),this.gui.add(this,"uniformsToClipboard"),this.gui.add(this,"reset"),Te.show()),F("particleCount",n),F("particleSize",l),F("numSteps",C),F("updateFieldDecay",P),F("updateFieldBlur",v),F("updateFieldSteps",b),F("particleColor",o),F("fieldColor",p),F("mouseStrength",_),F("mouseRadius",N),Object.entries(this.uniforms).forEach(([D,M])=>F(D,M,this.uniforms)),this.renderParticles=a,this.renderField=u,this.writeField=f,this.readOtherFields=s,this.readOtherParticles=c,this.wrapParticles=k,this.initialParticlesXY=S,this.initialParticlesZW=A,this.initialField=y,this.updateParticles=h,this.renderParticlesBlend=x,this.renderFieldBlend=g,this.numStorysParticles=U,this.writeFieldBlend=m,this.updateField=O,this.shareField=i,this.seed=Math.floor(Math.random()*1e3),this.standardParticlesVP=`
      particle = particles(ID.xy);
      VOut.xy = 2.0 * (particles(ID.xy).xy+XY*particleSize)/vec2(ViewSize) - 1.0;`,this.reset(),H.instances.push(this)}uniformsToClipboard(){const e=JSON.stringify({particleCount:this.particleCount,particleSize:this.particleSize,numSteps:this.numSteps,updateFieldDecay:this.updateFieldDecay,updateFieldBlur:this.updateFieldBlur,updateFieldSteps:this.updateFieldSteps,uniforms:this.uniforms});navigator.clipboard.writeText(e)}frame(){for(let e=0;e<this.numSteps;e++)this.step(K);this.render(K)}render(e){e({fieldColor:this.fieldColor,Blend:this.renderFieldBlend,field:this.field[0],FP:this.renderField,...this.uniforms}),e({particleColor:this.particleColor,Blend:this.renderParticlesBlend,particles:this.particles[0],Grid:this.particles[0].size,particleSize:this.particleSize,Inc:"varying vec4 particle;",VP:this.standardParticlesVP,FP:this.renderParticles})}reset(){this.field=K({FP:this.initialField},{story:2,format:"rgba32f",tag:`field_${this.name}`});for(let e=0;e<this.numStorysParticles;e++)this.particles=K({seed:this.seed,field:this.shareField&&V?V:this.field[0],FP:`vec2 worldSize = vec2(field_size());
          FOut = vec4(${this.initialParticlesXY}, ${this.initialParticlesZW});`},{size:Array(2).fill(Math.ceil(Math.sqrt(this.particleCount))),story:this.numStorysParticles,format:"rgba32f",tag:`particles_${this.name}`})}step(e){for(let t=0;t<this.updateFieldSteps;t++)e({updateFieldDecay:Math.pow(this.updateFieldDecay,1/this.updateFieldSteps),updateFieldBlur:this.updateFieldBlur,FP:this.updateField},this.field);e({...this.uniforms,mouse:Xe,time:ye,timeDelta:De,mouseStrength:this.mouseStrength,mouseRadius:this.mouseRadius,...this.numStorysParticles>2?{past:this.particles[1]}:{},seed:this.seed,field:this.shareField&&V?V:this.field[0],...this.readOtherFields?Object.fromEntries(H.instances.filter(t=>t.field).map(t=>[`field_${t.name}`,t.field[0]])):{},...this.readOtherParticles?Object.fromEntries(H.instances.filter(t=>t.particles).map(t=>[`particles_${t.name}`,t.particles[0]])):{},FP:`FOut = Src(I);
      vec2 worldSize = vec2(field_size());
      ${typeof this.updateParticles=="function"?this.updateParticles():this.updateParticles}
      vec2 mousePos = mouse.xy;
      float aspectRatio = worldSize.x/worldSize.y;
      vec2 aspectMult = aspectRatio > 1. ? vec2(aspectRatio, 1.) : vec2(1., 1./aspectRatio);
      float mouseDist = length(mousePos*worldSize - FOut.xy);
      mouseDist = min(mouseDist, length((mousePos+worldSize)*worldSize - FOut.xy));
      mouseDist = min(mouseDist, length((mousePos-worldSize)*worldSize - FOut.xy));
      float strength = mouse.z * smoothstep(mouseRadius, 0., mouseDist/max(worldSize.x, worldSize.y));
      FOut.xy += mouseStrength * strength * (mousePos*worldSize - FOut.xy);
      ${this.wrapParticles?"FOut.xy = mod(FOut.xy, worldSize);":""}`},this.particles),e({...this.uniforms,mouse:Xe,time:ye,timeDelta:De,seed:this.seed,mouseStrength:this.mouseStrength,particles:this.particles[0],Grid:this.particles[0].size,particleSize:this.particleSize,Blend:this.writeFieldBlend,Inc:"varying vec4 particle;",VP:this.standardParticlesVP,FP:this.writeField},this.field[0])}};let q=H;Ae(q,"instances",[]);var Be={},Hr={get exports(){return Be},set exports(r){Be=r}};(function(r){var e=function(){var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(a,o){if(!i[a]){i[a]={};for(var u=0;u<a.length;u++)i[a][a.charAt(u)]=u}return i[a][o]}var c={compressToBase64:function(a){if(a==null)return"";var o=c._compress(a,6,function(u){return n.charAt(u)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:c._decompress(a.length,32,function(o){return s(n,a.charAt(o))})},compressToUTF16:function(a){return a==null?"":c._compress(a,15,function(o){return t(o+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:c._decompress(a.length,16384,function(o){return a.charCodeAt(o)-32})},compressToUint8Array:function(a){for(var o=c.compress(a),u=new Uint8Array(o.length*2),p=0,f=o.length;p<f;p++){var m=o.charCodeAt(p);u[p*2]=m>>>8,u[p*2+1]=m%256}return u},decompressFromUint8Array:function(a){if(a==null)return c.decompress(a);for(var o=new Array(a.length/2),u=0,p=o.length;u<p;u++)o[u]=a[u*2]*256+a[u*2+1];var f=[];return o.forEach(function(m){f.push(t(m))}),c.decompress(f.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":c._compress(a,6,function(o){return l.charAt(o)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),c._decompress(a.length,32,function(o){return s(l,a.charAt(o))}))},compress:function(a){return c._compress(a,16,function(o){return t(o)})},_compress:function(a,o,u){if(a==null)return"";var p,f,m={},g={},x="",P="",v="",b=2,O=3,S=2,A=[],y=0,h=0,d;for(d=0;d<a.length;d+=1)if(x=a.charAt(d),Object.prototype.hasOwnProperty.call(m,x)||(m[x]=O++,g[x]=!0),P=v+x,Object.prototype.hasOwnProperty.call(m,P))v=P;else{if(Object.prototype.hasOwnProperty.call(g,v)){if(v.charCodeAt(0)<256){for(p=0;p<S;p++)y=y<<1,h==o-1?(h=0,A.push(u(y)),y=0):h++;for(f=v.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}else{for(f=1,p=0;p<S;p++)y=y<<1|f,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=0;for(f=v.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}b--,b==0&&(b=Math.pow(2,S),S++),delete g[v]}else for(f=m[v],p=0;p<S;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;b--,b==0&&(b=Math.pow(2,S),S++),m[P]=O++,v=String(x)}if(v!==""){if(Object.prototype.hasOwnProperty.call(g,v)){if(v.charCodeAt(0)<256){for(p=0;p<S;p++)y=y<<1,h==o-1?(h=0,A.push(u(y)),y=0):h++;for(f=v.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}else{for(f=1,p=0;p<S;p++)y=y<<1|f,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=0;for(f=v.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1}b--,b==0&&(b=Math.pow(2,S),S++),delete g[v]}else for(f=m[v],p=0;p<S;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;b--,b==0&&(b=Math.pow(2,S),S++)}for(f=2,p=0;p<S;p++)y=y<<1|f&1,h==o-1?(h=0,A.push(u(y)),y=0):h++,f=f>>1;for(;;)if(y=y<<1,h==o-1){A.push(u(y));break}else h++;return A.join("")},decompress:function(a){return a==null?"":a==""?null:c._decompress(a.length,32768,function(o){return a.charCodeAt(o)})},_decompress:function(a,o,u){var p=[],f=4,m=4,g=3,x="",P=[],v,b,O,S,A,y,h,d={val:u(0),position:o,index:1};for(v=0;v<3;v+=1)p[v]=v;for(O=0,A=Math.pow(2,2),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;switch(O){case 0:for(O=0,A=Math.pow(2,8),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;h=t(O);break;case 1:for(O=0,A=Math.pow(2,16),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;h=t(O);break;case 2:return""}for(p[3]=h,b=h,P.push(h);;){if(d.index>a)return"";for(O=0,A=Math.pow(2,g),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;switch(h=O){case 0:for(O=0,A=Math.pow(2,8),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;p[m++]=t(O),h=m-1,f--;break;case 1:for(O=0,A=Math.pow(2,16),y=1;y!=A;)S=d.val&d.position,d.position>>=1,d.position==0&&(d.position=o,d.val=u(d.index++)),O|=(S>0?1:0)*y,y<<=1;p[m++]=t(O),h=m-1,f--;break;case 2:return P.join("")}if(f==0&&(f=Math.pow(2,g),g++),p[h])x=p[h];else if(h===m)x=b+b.charAt(0);else return null;P.push(x),p[m++]=b+x.charAt(0),f--,b=x,f==0&&(f=Math.pow(2,g),g++)}}};return c}();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Hr);const Ar=Be;var Vr=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var l=42;e[t]=l;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==l||s.enumerable!==!0)return!1}return!0},er=typeof Symbol<"u"&&Symbol,qr=Vr,Qr=function(){return typeof er!="function"||typeof Symbol!="function"||typeof er("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qr()},rr={foo:{}},Zr=Object,Yr=function(){return{__proto__:rr}.foo===rr.foo&&!({__proto__:null}instanceof Zr)},Jr="Function.prototype.bind called on incompatible ",be=Array.prototype.slice,Kr=Object.prototype.toString,Xr="[object Function]",et=function(e){var t=this;if(typeof t!="function"||Kr.call(t)!==Xr)throw new TypeError(Jr+t);for(var n=be.call(arguments,1),l,i=function(){if(this instanceof l){var u=t.apply(this,n.concat(be.call(arguments)));return Object(u)===u?u:this}else return t.apply(e,n.concat(be.call(arguments)))},s=Math.max(0,t.length-n.length),c=[],a=0;a<s;a++)c.push("$"+a);if(l=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var o=function(){};o.prototype=t.prototype,l.prototype=new o,o.prototype=null}return l},rt=et,He=Function.prototype.bind||rt,tt=He,nt=tt.call(Function.call,Object.prototype.hasOwnProperty),w,ee=SyntaxError,Or=Function,X=TypeError,xe=function(r){try{return Or('"use strict"; return ('+r+").constructor;")()}catch{}},Q=Object.getOwnPropertyDescriptor;if(Q)try{Q({},"")}catch{Q=null}var Pe=function(){throw new X},it=Q?function(){try{return arguments.callee,Pe}catch{try{return Q(arguments,"callee").get}catch{return Pe}}}():Pe,Y=Qr(),at=Yr(),I=Object.getPrototypeOf||(at?function(r){return r.__proto__}:null),J={},ot=typeof Uint8Array>"u"||!I?w:I(Uint8Array),Z={"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&I?I([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":J,"%AsyncGenerator%":J,"%AsyncGeneratorFunction%":J,"%AsyncIteratorPrototype%":J,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":Or,"%GeneratorFunction%":J,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&I?I(I([][Symbol.iterator]())):w,"%JSON%":typeof JSON=="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!I?w:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!I?w:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&I?I(""[Symbol.iterator]()):w,"%Symbol%":Y?Symbol:w,"%SyntaxError%":ee,"%ThrowTypeError%":it,"%TypedArray%":ot,"%TypeError%":X,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet};if(I)try{null.error}catch(r){var lt=I(I(r));Z["%Error.prototype%"]=lt}var ct=function r(e){var t;if(e==="%AsyncFunction%")t=xe("async function () {}");else if(e==="%GeneratorFunction%")t=xe("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=xe("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var l=r("%AsyncGenerator%");l&&I&&(t=I(l.prototype))}return Z[e]=t,t},tr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ce=He,de=nt,st=ce.call(Function.call,Array.prototype.concat),ft=ce.call(Function.apply,Array.prototype.splice),nr=ce.call(Function.call,String.prototype.replace),he=ce.call(Function.call,String.prototype.slice),ut=ce.call(Function.call,RegExp.prototype.exec),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,yt=/\\(\\)?/g,dt=function(e){var t=he(e,0,1),n=he(e,-1);if(t==="%"&&n!=="%")throw new ee("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new ee("invalid intrinsic syntax, expected opening `%`");var l=[];return nr(e,pt,function(i,s,c,a){l[l.length]=c?nr(a,yt,"$1"):s||i}),l},ht=function(e,t){var n=e,l;if(de(tr,n)&&(l=tr[n],n="%"+l[0]+"%"),de(Z,n)){var i=Z[n];if(i===J&&(i=ct(n)),typeof i>"u"&&!t)throw new X("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:l,name:n,value:i}}throw new ee("intrinsic "+e+" does not exist!")},Ve=function(e,t){if(typeof e!="string"||e.length===0)throw new X("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new X('"allowMissing" argument must be a boolean');if(ut(/^%?[^%]*%?$/,e)===null)throw new ee("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=dt(e),l=n.length>0?n[0]:"",i=ht("%"+l+"%",t),s=i.name,c=i.value,a=!1,o=i.alias;o&&(l=o[0],ft(n,st([0,1],o)));for(var u=1,p=!0;u<n.length;u+=1){var f=n[u],m=he(f,0,1),g=he(f,-1);if((m==='"'||m==="'"||m==="`"||g==='"'||g==="'"||g==="`")&&m!==g)throw new ee("property names with quotes must have matching quotes");if((f==="constructor"||!p)&&(a=!0),l+="."+f,s="%"+l+"%",de(Z,s))c=Z[s];else if(c!=null){if(!(f in c)){if(!t)throw new X("base intrinsic for "+e+" exists, but the property is not available.");return}if(Q&&u+1>=n.length){var x=Q(c,f);p=!!x,p&&"get"in x&&!("originalValue"in x.get)?c=x.get:c=c[f]}else p=de(c,f),c=c[f];p&&!a&&(Z[s]=c)}}return c},Ce={},vt={get exports(){return Ce},set exports(r){Ce=r}};(function(r){var e=He,t=Ve,n=t("%Function.prototype.apply%"),l=t("%Function.prototype.call%"),i=t("%Reflect.apply%",!0)||e.call(l,n),s=t("%Object.getOwnPropertyDescriptor%",!0),c=t("%Object.defineProperty%",!0),a=t("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}r.exports=function(p){var f=i(e,l,arguments);if(s&&c){var m=s(f,"length");m.configurable&&c(f,"length",{value:1+a(0,p.length-(arguments.length-1))})}return f};var o=function(){return i(e,n,arguments)};c?c(r.exports,"apply",{value:o}):r.exports.apply=o})(vt);var br=Ve,xr=Ce,mt=xr(br("String.prototype.indexOf")),gt=function(e,t){var n=br(e,!!t);return typeof n=="function"&&mt(e,".prototype.")>-1?xr(n):n};const St={},wt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),At=Gr(wt);var qe=typeof Map=="function"&&Map.prototype,Fe=Object.getOwnPropertyDescriptor&&qe?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ve=qe&&Fe&&typeof Fe.get=="function"?Fe.get:null,ir=qe&&Map.prototype.forEach,Qe=typeof Set=="function"&&Set.prototype,Ee=Object.getOwnPropertyDescriptor&&Qe?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,me=Qe&&Ee&&typeof Ee.get=="function"?Ee.get:null,ar=Qe&&Set.prototype.forEach,Ot=typeof WeakMap=="function"&&WeakMap.prototype,ae=Ot?WeakMap.prototype.has:null,bt=typeof WeakSet=="function"&&WeakSet.prototype,oe=bt?WeakSet.prototype.has:null,xt=typeof WeakRef=="function"&&WeakRef.prototype,or=xt?WeakRef.prototype.deref:null,Pt=Boolean.prototype.valueOf,Ft=Object.prototype.toString,Et=Function.prototype.toString,It=String.prototype.match,Ze=String.prototype.slice,W=String.prototype.replace,Rt=String.prototype.toUpperCase,lr=String.prototype.toLowerCase,Pr=RegExp.prototype.test,cr=Array.prototype.concat,z=Array.prototype.join,$t=Array.prototype.slice,sr=Math.floor,Ue=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ie=Object.getOwnPropertySymbols,Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,re=typeof Symbol=="function"&&typeof Symbol.iterator=="object",$=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===re||"symbol")?Symbol.toStringTag:null,Fr=Object.prototype.propertyIsEnumerable,fr=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function ur(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Pr.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-sr(-r):sr(r);if(n!==r){var l=String(n),i=Ze.call(e,l.length+1);return W.call(l,t,"$&_")+"."+W.call(W.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return W.call(e,t,"$&_")}var We=At,pr=We.custom,yr=Ir(pr)?pr:null,Mt=function r(e,t,n,l){var i=t||{};if(L(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(L(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=L(i,"customInspect")?i.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(L(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(L(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return $r(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return c?ur(e,a):a}if(typeof e=="bigint"){var o=String(e)+"n";return c?ur(e,o):o}var u=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return Ge(e)?"[Array]":"[Object]";var p=Zt(i,n);if(typeof l>"u")l=[];else if(Rr(l,e)>=0)return"[Circular]";function f(N,F,D){if(F&&(l=$t.call(l),l.push(F)),D){var M={depth:i.depth};return L(i,"quoteStyle")&&(M.quoteStyle=i.quoteStyle),r(N,M,n+1,l)}return r(N,i,n+1,l)}if(typeof e=="function"&&!dr(e)){var m=Lt(e),g=se(e,f);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(g.length>0?" { "+z.call(g,", ")+" }":"")}if(Ir(e)){var x=re?W.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Le.call(e);return typeof e=="object"&&!re?ie(x):x}if(Vt(e)){for(var P="<"+lr.call(String(e.nodeName)),v=e.attributes||[],b=0;b<v.length;b++)P+=" "+v[b].name+"="+Er(_t(v[b].value),"double",i);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+lr.call(String(e.nodeName))+">",P}if(Ge(e)){if(e.length===0)return"[]";var O=se(e,f);return p&&!Qt(O)?"["+ke(O,p)+"]":"[ "+z.call(O,", ")+" ]"}if(Dt(e)){var S=se(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Fr.call(e,"cause")?"{ ["+String(e)+"] "+z.call(cr.call("[cause]: "+f(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+z.call(S,", ")+" }"}if(typeof e=="object"&&s){if(yr&&typeof e[yr]=="function"&&We)return We(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Wt(e)){var A=[];return ir&&ir.call(e,function(N,F){A.push(f(F,e,!0)+" => "+f(N,e))}),hr("Map",ve.call(e),A,p)}if(jt(e)){var y=[];return ar&&ar.call(e,function(N){y.push(f(N,e))}),hr("Set",me.call(e),y,p)}if(Gt(e))return Re("WeakMap");if(Ht(e))return Re("WeakSet");if(kt(e))return Re("WeakRef");if(zt(e))return ie(f(Number(e)));if(Ct(e))return ie(f(Ue.call(e)));if(Bt(e))return ie(Pt.call(e));if(Tt(e))return ie(f(String(e)));if(!Nt(e)&&!dr(e)){var h=se(e,f),d=fr?fr(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",U=!d&&$&&Object(e)===e&&$ in e?Ze.call(G(e),8,-1):C?"Object":"",k=d||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",_=k+(U||C?"["+z.call(cr.call([],U||[],C||[]),": ")+"] ":"");return h.length===0?_+"{}":p?_+"{"+ke(h,p)+"}":_+"{ "+z.call(h,", ")+" }"}return String(e)};function Er(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function _t(r){return W.call(String(r),/"/g,"&quot;")}function Ge(r){return G(r)==="[object Array]"&&(!$||!(typeof r=="object"&&$ in r))}function Nt(r){return G(r)==="[object Date]"&&(!$||!(typeof r=="object"&&$ in r))}function dr(r){return G(r)==="[object RegExp]"&&(!$||!(typeof r=="object"&&$ in r))}function Dt(r){return G(r)==="[object Error]"&&(!$||!(typeof r=="object"&&$ in r))}function Tt(r){return G(r)==="[object String]"&&(!$||!(typeof r=="object"&&$ in r))}function zt(r){return G(r)==="[object Number]"&&(!$||!(typeof r=="object"&&$ in r))}function Bt(r){return G(r)==="[object Boolean]"&&(!$||!(typeof r=="object"&&$ in r))}function Ir(r){if(re)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Le)return!1;try{return Le.call(r),!0}catch{}return!1}function Ct(r){if(!r||typeof r!="object"||!Ue)return!1;try{return Ue.call(r),!0}catch{}return!1}var Ut=Object.prototype.hasOwnProperty||function(r){return r in this};function L(r,e){return Ut.call(r,e)}function G(r){return Ft.call(r)}function Lt(r){if(r.name)return r.name;var e=It.call(Et.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Rr(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function Wt(r){if(!ve||!r||typeof r!="object")return!1;try{ve.call(r);try{me.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Gt(r){if(!ae||!r||typeof r!="object")return!1;try{ae.call(r,ae);try{oe.call(r,oe)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function kt(r){if(!or||!r||typeof r!="object")return!1;try{return or.call(r),!0}catch{}return!1}function jt(r){if(!me||!r||typeof r!="object")return!1;try{me.call(r);try{ve.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Ht(r){if(!oe||!r||typeof r!="object")return!1;try{oe.call(r,oe);try{ae.call(r,ae)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Vt(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function $r(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return $r(Ze.call(r,0,e.maxStringLength),e)+n}var l=W.call(W.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,qt);return Er(l,"single",e)}function qt(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Rt.call(e.toString(16))}function ie(r){return"Object("+r+")"}function Re(r){return r+" { ? }"}function hr(r,e,t,n){var l=n?ke(t,n):z.call(t,", ");return r+" ("+e+") {"+l+"}"}function Qt(r){for(var e=0;e<r.length;e++)if(Rr(r[e],`
`)>=0)return!1;return!0}function Zt(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=z.call(Array(r.indent+1)," ");else return null;return{base:t,prev:z.call(Array(e+1),t)}}function ke(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+z.call(r,","+t)+`
`+e.prev}function se(r,e){var t=Ge(r),n=[];if(t){n.length=r.length;for(var l=0;l<r.length;l++)n[l]=L(r,l)?e(r[l],r):""}var i=typeof Ie=="function"?Ie(r):[],s;if(re){s={};for(var c=0;c<i.length;c++)s["$"+i[c]]=i[c]}for(var a in r)L(r,a)&&(t&&String(Number(a))===a&&a<r.length||re&&s["$"+a]instanceof Symbol||(Pr.call(/[^\w$]/,a)?n.push(e(a,r)+": "+e(r[a],r)):n.push(a+": "+e(r[a],r))));if(typeof Ie=="function")for(var o=0;o<i.length;o++)Fr.call(r,i[o])&&n.push("["+e(i[o])+"]: "+e(r[i[o]],r));return n}var Ye=Ve,ne=gt,Yt=Mt,Jt=Ye("%TypeError%"),fe=Ye("%WeakMap%",!0),ue=Ye("%Map%",!0),Kt=ne("WeakMap.prototype.get",!0),Xt=ne("WeakMap.prototype.set",!0),en=ne("WeakMap.prototype.has",!0),rn=ne("Map.prototype.get",!0),tn=ne("Map.prototype.set",!0),nn=ne("Map.prototype.has",!0),Je=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},an=function(r,e){var t=Je(r,e);return t&&t.value},on=function(r,e,t){var n=Je(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},ln=function(r,e){return!!Je(r,e)},cn=function(){var e,t,n,l={assert:function(i){if(!l.has(i))throw new Jt("Side channel does not contain "+Yt(i))},get:function(i){if(fe&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Kt(e,i)}else if(ue){if(t)return rn(t,i)}else if(n)return an(n,i)},has:function(i){if(fe&&i&&(typeof i=="object"||typeof i=="function")){if(e)return en(e,i)}else if(ue){if(t)return nn(t,i)}else if(n)return ln(n,i);return!1},set:function(i,s){fe&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new fe),Xt(e,i,s)):ue?(t||(t=new ue),tn(t,i,s)):(n||(n={key:{},next:null}),on(n,i,s))}};return l},sn=String.prototype.replace,fn=/%20/g,$e={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ke={default:$e.RFC3986,formatters:{RFC1738:function(r){return sn.call(r,fn,"+")},RFC3986:function(r){return String(r)}},RFC1738:$e.RFC1738,RFC3986:$e.RFC3986},un=Ke,Me=Object.prototype.hasOwnProperty,j=Array.isArray,T=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),pn=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(j(n)){for(var l=[],i=0;i<n.length;++i)typeof n[i]<"u"&&l.push(n[i]);t.obj[t.prop]=l}}},Mr=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},l=0;l<e.length;++l)typeof e[l]<"u"&&(n[l]=e[l]);return n},yn=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(j(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Me.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var l=e;return j(e)&&!j(t)&&(l=Mr(e,n)),j(e)&&j(t)?(t.forEach(function(i,s){if(Me.call(e,s)){var c=e[s];c&&typeof c=="object"&&i&&typeof i=="object"?e[s]=r(c,i,n):e.push(i)}else e[s]=i}),e):Object.keys(t).reduce(function(i,s){var c=t[s];return Me.call(i,s)?i[s]=r(i[s],c,n):i[s]=c,i},l)},dn=function(e,t){return Object.keys(t).reduce(function(n,l){return n[l]=t[l],n},e)},hn=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},vn=function(e,t,n,l,i){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var c="",a=0;a<s.length;++a){var o=s.charCodeAt(a);if(o===45||o===46||o===95||o===126||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||i===un.RFC1738&&(o===40||o===41)){c+=s.charAt(a);continue}if(o<128){c=c+T[o];continue}if(o<2048){c=c+(T[192|o>>6]+T[128|o&63]);continue}if(o<55296||o>=57344){c=c+(T[224|o>>12]+T[128|o>>6&63]+T[128|o&63]);continue}a+=1,o=65536+((o&1023)<<10|s.charCodeAt(a)&1023),c+=T[240|o>>18]+T[128|o>>12&63]+T[128|o>>6&63]+T[128|o&63]}return c},mn=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],l=0;l<t.length;++l)for(var i=t[l],s=i.obj[i.prop],c=Object.keys(s),a=0;a<c.length;++a){var o=c[a],u=s[o];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(t.push({obj:s,prop:o}),n.push(u))}return pn(t),e},gn=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Sn=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},wn=function(e,t){return[].concat(e,t)},An=function(e,t){if(j(e)){for(var n=[],l=0;l<e.length;l+=1)n.push(t(e[l]));return n}return t(e)},_r={arrayToObject:Mr,assign:dn,combine:wn,compact:mn,decode:hn,encode:vn,isBuffer:Sn,isRegExp:gn,maybeMap:An,merge:yn},Nr=cn,pe=_r,le=Ke,On=Object.prototype.hasOwnProperty,vr={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},B=Array.isArray,bn=Array.prototype.push,Dr=function(r,e){bn.apply(r,B(e)?e:[e])},xn=Date.prototype.toISOString,mr=le.default,R={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:pe.encode,encodeValuesOnly:!1,format:mr,formatter:le.formatters[mr],indices:!1,serializeDate:function(e){return xn.call(e)},skipNulls:!1,strictNullHandling:!1},Pn=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},_e={},Fn=function r(e,t,n,l,i,s,c,a,o,u,p,f,m,g,x,P){for(var v=e,b=P,O=0,S=!1;(b=b.get(_e))!==void 0&&!S;){var A=b.get(e);if(O+=1,typeof A<"u"){if(A===O)throw new RangeError("Cyclic object value");S=!0}typeof b.get(_e)>"u"&&(O=0)}if(typeof a=="function"?v=a(t,v):v instanceof Date?v=p(v):n==="comma"&&B(v)&&(v=pe.maybeMap(v,function(M){return M instanceof Date?p(M):M})),v===null){if(i)return c&&!g?c(t,R.encoder,x,"key",f):t;v=""}if(Pn(v)||pe.isBuffer(v)){if(c){var y=g?t:c(t,R.encoder,x,"key",f);return[m(y)+"="+m(c(v,R.encoder,x,"value",f))]}return[m(t)+"="+m(String(v))]}var h=[];if(typeof v>"u")return h;var d;if(n==="comma"&&B(v))g&&c&&(v=pe.maybeMap(v,c)),d=[{value:v.length>0?v.join(",")||null:void 0}];else if(B(a))d=a;else{var C=Object.keys(v);d=o?C.sort(o):C}for(var U=l&&B(v)&&v.length===1?t+"[]":t,k=0;k<d.length;++k){var _=d[k],N=typeof _=="object"&&typeof _.value<"u"?_.value:v[_];if(!(s&&N===null)){var F=B(v)?typeof n=="function"?n(U,_):U:U+(u?"."+_:"["+_+"]");P.set(e,O);var D=Nr();D.set(_e,P),Dr(h,r(N,F,n,l,i,s,n==="comma"&&g&&B(v)?null:c,a,o,u,p,f,m,g,x,D))}}return h},En=function(e){if(!e)return R;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||R.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=le.default;if(typeof e.format<"u"){if(!On.call(le.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var l=le.formatters[n],i=R.filter;return(typeof e.filter=="function"||B(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:R.addQueryPrefix,allowDots:typeof e.allowDots>"u"?R.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:R.charsetSentinel,delimiter:typeof e.delimiter>"u"?R.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:R.encode,encoder:typeof e.encoder=="function"?e.encoder:R.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:R.encodeValuesOnly,filter:i,format:n,formatter:l,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:R.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:R.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:R.strictNullHandling}},In=function(r,e){var t=r,n=En(e),l,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):B(n.filter)&&(i=n.filter,l=i);var s=[];if(typeof t!="object"||t===null)return"";var c;e&&e.arrayFormat in vr?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var a=vr[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=a==="comma"&&e&&e.commaRoundTrip;l||(l=Object.keys(t)),n.sort&&l.sort(n.sort);for(var u=Nr(),p=0;p<l.length;++p){var f=l[p];n.skipNulls&&t[f]===null||Dr(s,Fn(t[f],f,a,o,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var m=s.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""},te=_r,je=Object.prototype.hasOwnProperty,Rn=Array.isArray,E={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:te.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},$n=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Tr=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},Mn="utf8=%26%2310003%3B",_n="utf8=%E2%9C%93",Nn=function(e,t){var n={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=l.split(t.delimiter,i),c=-1,a,o=t.charset;if(t.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===_n?o="utf-8":s[a]===Mn&&(o="iso-8859-1"),c=a,a=s.length);for(a=0;a<s.length;++a)if(a!==c){var u=s[a],p=u.indexOf("]="),f=p===-1?u.indexOf("="):p+1,m,g;f===-1?(m=t.decoder(u,E.decoder,o,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(u.slice(0,f),E.decoder,o,"key"),g=te.maybeMap(Tr(u.slice(f+1),t),function(x){return t.decoder(x,E.decoder,o,"value")})),g&&t.interpretNumericEntities&&o==="iso-8859-1"&&(g=$n(g)),u.indexOf("[]=")>-1&&(g=Rn(g)?[g]:g),je.call(n,m)?n[m]=te.combine(n[m],g):n[m]=g}return n},Dn=function(r,e,t,n){for(var l=n?e:Tr(e,t),i=r.length-1;i>=0;--i){var s,c=r[i];if(c==="[]"&&t.parseArrays)s=[].concat(l);else{s=t.plainObjects?Object.create(null):{};var a=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,o=parseInt(a,10);!t.parseArrays&&a===""?s={0:l}:!isNaN(o)&&c!==a&&String(o)===a&&o>=0&&t.parseArrays&&o<=t.arrayLimit?(s=[],s[o]=l):a!=="__proto__"&&(s[a]=l)}l=s}return l},Tn=function(e,t,n,l){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,a=n.depth>0&&s.exec(i),o=a?i.slice(0,a.index):i,u=[];if(o){if(!n.plainObjects&&je.call(Object.prototype,o)&&!n.allowPrototypes)return;u.push(o)}for(var p=0;n.depth>0&&(a=c.exec(i))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&je.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+i.slice(a.index)+"]"),Dn(u,t,n,l)}},zn=function(e){if(!e)return E;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?E.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?E.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:E.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:E.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:E.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:E.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:E.comma,decoder:typeof e.decoder=="function"?e.decoder:E.decoder,delimiter:typeof e.delimiter=="string"||te.isRegExp(e.delimiter)?e.delimiter:E.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:E.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:E.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:E.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:E.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:E.strictNullHandling}},Bn=function(r,e){var t=zn(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?Nn(r,t):r,l=t.plainObjects?Object.create(null):{},i=Object.keys(n),s=0;s<i.length;++s){var c=i[s],a=Tn(c,n[c],t,typeof r=="string");l=te.merge(l,a,t)}return t.allowSparse===!0?l:te.compact(l)},Cn=In,Un=Bn,Ln=Ke,zr={formats:Ln,parse:Un,stringify:Cn};const Br="",Cr=!0,gr=2,Wn=["species","uniforms","particleColor","fieldColor","renderFieldBlend","renderParticlesBlend","mouseRadius","mouseStrength","initialParticlesXY","type","particleSize","particleCount","bgColor","senseDist","senseAng","moveAng","moveDist","dt","friction","rMax","beta","forceFactor","bgLength","numSpecies","blendMode"],Gn=["i","j","l","f","t","I","r","c","k","s","v","x","y","z","J","a","b","d","e","g","h","n","o","p","q","u","L","F","T","Z"],Ur=Object.fromEntries(Wn.map((r,e)=>[r,Gn[e]])),kn=Object.fromEntries(Object.entries(Ur).map(([r,e])=>[e,r])),jn=(r,e=Ur)=>(r.split("[").map(n=>n.replace("]","")).filter(n=>isNaN(n)).forEach(n=>{r=r.replaceAll(n,e[n]||n)}),r=r.split("[").map(n=>n.replace("]","")).join(Br),r),Hn=(r,e=kn)=>(r=r.split(Br).map(n=>isNaN(n)&&e[n]||n).map((n,l)=>l===0?n:`[${n}]`).join(""),r),Kn=r=>{const e=new URL(window.location.href),t=zr.stringify(r,{encoder:(n,l,i,s)=>l(s==="key"&&Cr?jn(n):typeof n=="number"?Math.round(n*Math.pow(10,gr))/Math.pow(10,gr):n,l,i,s)});e.search=Ar.compressToEncodedURIComponent(t),setTimeout(()=>console.log("URL PARAM LENGTH",e.search.length),100),window.history.replaceState({},"",e)},Xn=()=>{const r=new URL(window.location.href);return zr.parse(Ar.decompressFromEncodedURIComponent(r.search.split("?")[1]),{ignoreQueryPrefix:!0,decoder:(t,n,l,i)=>{const s=n(t,n,l,i),c=Number(s);return i==="key"&&Cr?Hn(s):Number.isNaN(c)?s:c}})},ge=class extends q{constructor(e){super({particleCount:50,particleSize:5,renderField:"mix(vec4(0.), fieldColor, length(field(UV))/2.)",readOtherParticles:!0,initialParticlesZW:ze.RANDOM_UNIT,updateParticles:()=>`
  FOut = Src(I); // current particle
  #define wrap(p) (fract(p+0.5)-0.5)
  vec2 force=vec2(0.); // initialize force vector to 0
  ${ge.instances.map((t,n)=>`// Looping through all particles to compute forces
  for (int y=0; y<particles_${t.name}_size().y; ++y)
  for (int x=0; x<particles_${t.name}_size().x; ++x) {
    if (x==I.x && y==I.y) continue; // Skip self
    vec2 data1 = particles_${t.name}(ivec2(x,y)).xy/(min(worldSize.x,worldSize.y)); // particle to compare with
    vec2 dpos = wrap(data1-(FOut.xy/(min(worldSize.x,worldSize.y)))); // distance vector between particles
    float r = length(dpos); // length of distance vector
    if (r>0.&&r<rMax) {
      float f = 0.;
      if (r<beta) f = r/beta-1.;
      else if (beta<r&&r<1.) f = F[${Math.min(Math.round(n),3)}]*(1.-abs(2.*r-1.-beta)/(1.-beta));
      force += dpos/r*f; // add net force (attraction - repulsion) to the force vector
    }
  }`).join(`
`)}
  force *= rMax*forceFactor;

  FOut.zw *= friction;
  FOut.zw += force*dt;

  // Compute new velocity and position
  FOut.xy = FOut.xy+FOut.zw;
  `,...e,uniforms:{dt:.01,friction:.94,rMax:.2,beta:.01,forceFactor:6,F:Array(4).fill().map(()=>Math.random()*2-1),...e.uniforms||{}}}),ge.instances.push(this)}};let Ne=ge;Ae(Ne,"instances",[]);class ei extends q{constructor(e){super({particleCount:1e4,particleSize:1,updateParticles:`
  vec2 dir = vec2(cos(FOut.z), sin(FOut.z));
  mat2 R = rot2(radians(senseAng));
  vec2 sense = senseDist*dir;
  #define F(p) field((FOut.xy+(p))/worldSize)[int(senseChannel)]
  float c=F(sense), r=F(R*sense), l=F(sense*R);
  float rotAng = radians(moveAng);
  if (l>c && c>r) {
      FOut.z -= rotAng;
  } else if (r>c && c>l) {
      FOut.z += rotAng;
  } else if (c<=r && c<=l) {
      FOut.z += sign(hash(ivec3(FOut.xyz*seed)).x-0.5)*rotAng;
  }
  FOut.xy += dir*moveDist;`,...e,uniforms:{senseDist:18,senseAng:6,senseChannel:0,moveAng:45,moveDist:1,...e.uniforms||{}}})}}export{Oe as B,ze as D,Ne as P,ei as a,Xn as d,Kn as e,Jn as r};
